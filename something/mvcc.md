## **MySQL事务 - MVCC**
------------------
### **事务的四大特性 - ACID**
* **原子性 - Atomicity**
    + 一个事务是一个不可分割的工作单位，事务中的所有操作要么都完成，要么全都不做；如果事务中的一个sql语句执行失败，所有已执行的语句必须回滚，数据库退回到事务发生之前的状态。
* **持久性 - Durability**
    + 事务一旦提交，对于数据库的改变应该是永久性的，接下来的其他操作或故障不应该对其有任何影响。
* **隔离性 - Isolation**
    + 事务内部操作与其它事务是隔离的，隔离性追求的是并发情形下事务之间互不干扰。
    + **锁机制**  隔离性要求同一时刻只能有一个事务对数据进行写操作，事务在修改数据前需要获得相应的锁，并且只有当事务提交后，锁才会释放。MyIsam只支持表锁，InnoDB同时支持表锁和行锁，一般情况使用行锁。
    + 并发情况下读操作可能出现三种问题：
        * **脏读**  
        当前事务可以读到其它事务未提交的数据（脏数据）
        * **不可重复读**  
        在一个事务中先后两次读取同一个数据，读取结果不同，即读到其它事务修改并提交的数据。
        * **幻读**  
        在一个事务中先后两次查询数据库，两次查询到的条数不同，即读取到其它事务插入/删除并提交的数据。
    + **事务隔离级别**  
        ![图片加载失败](https://maxwell-l.github.io/WriteSomething/image/mvcc1.png)


